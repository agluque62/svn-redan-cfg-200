(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{flQ6:function(i,e,a){"use strict";a.r(e),a.d(e,"ResourceNRangeComponent",function(){return v});var t=a("mrSG"),n=a("MuhJ"),s=a("fXoL"),r=a("f5O9"),o=a("VITL"),l=a("kmnG"),c=a("ofXK"),b=a("wZkO"),d=a("qFsG");function u(i,e){if(1&i){const i=s.Ub();s.Tb(0,"div",10),s.Tb(1,"div",11),s.Tb(2,"mat-form-field",12),s.Tb(3,"input",13),s.ac("change",function(a){s.rc(i);const t=e.index;return s.ec(2).saveValue(a,t,0,"inicial")}),s.Sb(),s.Sb(),s.Sb(),s.Tb(4,"div",11),s.Tb(5,"mat-form-field",12),s.Tb(6,"input",13),s.ac("change",function(a){s.rc(i);const t=e.index;return s.ec(2).saveValue(a,t,0,"final")}),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&i){const i=e.$implicit,a=s.ec(2);s.Cb(3),s.kc("disabled",a.visualizationMode)("maxLength",6)("value",i.inicial),s.Cb(3),s.kc("disabled",a.visualizationMode)("maxLength",6)("value",i.final)}}function g(i,e){if(1&i){const i=s.Ub();s.Tb(0,"div",10),s.Tb(1,"div",11),s.Tb(2,"mat-form-field",12),s.Tb(3,"input",13),s.ac("change",function(a){s.rc(i);const t=e.index;return s.ec(3).saveValue(a,t,1,"inicial")}),s.Sb(),s.Sb(),s.Sb(),s.Tb(4,"div",11),s.Tb(5,"mat-form-field",12),s.Tb(6,"input",13),s.ac("change",function(a){s.rc(i);const t=e.index;return s.ec(3).saveValue(a,t,1,"final")}),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&i){const i=e.$implicit,a=s.ec(3);s.Cb(3),s.kc("disabled",a.visualizationMode)("maxLength",6)("value",i.inicial),s.Cb(3),s.kc("disabled",a.visualizationMode)("maxLength",6)("value",i.final)}}function h(i,e){if(1&i&&(s.Tb(0,"mat-tab",14),s.Tb(1,"div",5),s.Tb(2,"div",6),s.Tb(3,"div",7),s.yc(4," Inicio "),s.Sb(),s.Tb(5,"div",7),s.yc(6," Final "),s.Sb(),s.Sb(),s.xc(7,g,7,6,"div",8),s.Sb(),s.Sb()),2&i){const i=s.ec(2);s.Cb(7),s.kc("ngForOf",i.destinationRanks)}}function m(i,e){if(1&i&&(s.Tb(0,"mat-tab-group",3),s.Tb(1,"mat-tab",4),s.Tb(2,"div",5),s.Tb(3,"div",6),s.Tb(4,"div",7),s.yc(5," Inicio "),s.Sb(),s.Tb(6,"div",7),s.yc(7," Final "),s.Sb(),s.Sb(),s.xc(8,u,7,6,"div",8),s.Sb(),s.Sb(),s.xc(9,h,8,1,"mat-tab",9),s.Sb()),2&i){const i=s.ec();s.Cb(8),s.kc("ngForOf",i.originRanks),s.Cb(1),s.kc("ngIf",i.displayDestination)}}let v=(()=>{class i{constructor(i,e){this.alertService=i,this.userService=e,this.tableCols=["Inicio","Final"],this.inicio="Inicio",this.displayDestination=!1,this.originRanks=[],this.destinationRanks=[],this.ready=!1,this.visualizationMode=!1}ngOnInit(){this.visualizationMode=!!this.visualizationPermission(),this.initRanks(this.resourceForm.value.ranks)}visualizationPermission(){return!this.userService.isRole("ADMIN")&&!this.userService.isRole("CONFIGURATION")&&this.userService.isRole("VISUALIZATION")}initRanks(i){if(null!=i&&i.length>0){let e=i.filter(i=>0==i.tipo);this.originRanks=e,e=i.filter(i=>1==i.tipo),this.destinationRanks=e}else{const i=4;for(let e=0;e<i;e++)this.originRanks.push({inicial:"",final:"",tipo:0}),this.destinationRanks.push({inicial:"",final:"",tipo:1})}this.ready=!0}saveValue(i,e,a,s){return Object(t.a)(this,void 0,void 0,function*(){null!=i.target.value.match(n.a.AGVN_PATTERN)?(0==a?"inicial"===s?""!==this.originRanks[e].final&&i.target.value>this.originRanks[e].final?(yield this.alertService.errorMessage("","El numero de inicio no puede ser mayor que el final"),i.target.value=""):this.originRanks[e][s]=i.target.value:"final"===s&&(""!==this.originRanks[e].inicial&&i.target.value<this.originRanks[e].inicial?(yield this.alertService.errorMessage("","El numero final no puede ser menor que el inicial"),i.target.value=""):this.originRanks[e][s]=i.target.value):1==a&&("inicial"===s?""!==this.destinationRanks[e].final&&i.target.value>this.destinationRanks[e].final?(yield this.alertService.errorMessage("","El numero de inicio no puede ser mayor que el final"),i.target.value=""):this.destinationRanks[e][s]=i.target.value:"final"===s&&(""!==this.destinationRanks[e].inicial&&i.target.value<this.destinationRanks[e].inicial?(yield this.alertService.errorMessage("","El numero final no puede ser menor que el inicial"),i.target.value=""):this.destinationRanks[e][s]=i.target.value)),this.ranks=this.originRanks.concat(this.destinationRanks)):""===i.target.value?0==a?this.originRanks[e][s]=i.target.value:1==a&&(this.destinationRanks[e][s]=i.target.value):null==i.target.value.match(n.a.AGVN_PATTERN)&&""!=i.target.value&&(yield this.alertService.errorMessage("","N\xfamero no v\xe1lido. El valor debe estar entre 200000 y 399999. Y debe ser de longitud 6"),i.target.value="")})}}return i.\u0275fac=function(e){return new(e||i)(s.Nb(r.a),s.Nb(o.a))},i.\u0275cmp=s.Hb({type:i,selectors:[["resource-nrange"]],decls:5,vars:1,consts:[[1,"main-nrange"],[1,"title"],["mat-align-tabs","start",4,"ngIf"],["mat-align-tabs","start"],["label","Origen"],[1,"custom-table","mat-elevation-z8"],[1,"header-row"],[1,"header-column"],["class","table-row",4,"ngFor","ngForOf"],["label","Destino",4,"ngIf"],[1,"table-row"],[1,"table-column"],["appearance","legacy"],["matInput","",3,"disabled","maxLength","value","change"],["label","Destino"]],template:function(i,e){1&i&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"mat-label"),s.yc(3,"Rango n\xfamero ATS"),s.Sb(),s.Sb(),s.xc(4,m,10,2,"mat-tab-group",2),s.Sb()),2&i&&(s.Cb(4),s.kc("ngIf",e.ready))},directives:[l.f,c.l,b.c,b.a,c.k,l.c,d.b],styles:[".main-nrange .mat-tab-label-active{opacity:1!important;border-bottom:2px solid #3f51b5}.main-nrange ::ng-deep .mat-ink-bar{display:none!important;visibility:hidden!important;transition:none!important;height:0!important;width:0!important}.main-nrange .custom-table{max-width:80%;margin:20px auto auto}.main-nrange .custom-table .header-row{min-height:56px;display:flex;border-width:0;align-items:center;box-sizing:border-box;border-bottom:1px rgba(0,0,0,.12);border-style:solid}.main-nrange .custom-table .header-row .header-column{display:flex;justify-content:space-around;padding-right:24px;color:rgba(0,0,0,.54);font-size:12px;font-weight:500;flex:1}.main-nrange .custom-table .table-row{display:flex;border-width:0;border-bottom:1px rgba(0,0,0,.12);border-style:solid;align-items:center;box-sizing:border-box;min-height:48px}.main-nrange .custom-table .table-row .table-column{flex:1;display:flex;justify-content:space-around;padding-right:24px}"],encapsulation:2}),i})()}}]);