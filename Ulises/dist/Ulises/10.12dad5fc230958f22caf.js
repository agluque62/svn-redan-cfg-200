(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{kCIX:function(e,i,t){"use strict";t.r(i),t.d(i,"ResourceListsComponent",function(){return y});var s=t("mrSG"),n=t("MuhJ"),a=t("fXoL"),r=t("f5O9"),l=t("VITL"),c=t("3Pt+"),o=t("kmnG"),u=t("d3UM"),b=t("ofXK"),p=t("FKr1"),d=t("qFsG");function v(e,i){if(1&e&&(a.Tb(0,"mat-option",8),a.yc(1),a.Sb()),2&e){const e=i.$implicit;a.kc("value",e.value),a.Cb(1),a.Ac(" ",e.viewValue," ")}}const f=function(e){return{"no-display":e}};function m(e,i){if(1&e&&(a.Tb(0,"div",1),a.Tb(1,"mat-label",9),a.yc(2,"Listas Negra"),a.Sb(),a.Tb(3,"mat-label",9),a.yc(4,"Listas Blanca"),a.Sb(),a.Sb()),2&e){const e=a.ec();a.Cb(1),a.kc("ngClass",a.mc(2,f,0==e.displayBLlabel)),a.Cb(2),a.kc("ngClass",a.mc(4,f,0==e.displayWLlabel))}}function g(e,i){if(1&e){const e=a.Ub();a.Tb(0,"div",12),a.Tb(1,"mat-form-field",13),a.Tb(2,"mat-label"),a.yc(3,"NombreRecurso@IP:Puerto"),a.Sb(),a.Tb(4,"input",14),a.ac("change",function(t){a.rc(e);const s=i.index;return a.ec(2).saveUri(t,s,"LSN")}),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=i.$implicit,t=a.ec(2);a.Cb(4),a.kc("disabled",t.visualizationMode)("value",e.uri)}}function h(e,i){if(1&e&&(a.Tb(0,"div",10),a.xc(1,g,5,2,"div",11),a.Sb()),2&e){const e=a.ec();a.Cb(1),a.kc("ngForOf",e.uriListToDisplay.LSN)}}function S(e,i){if(1&e){const e=a.Ub();a.Tb(0,"div",12),a.Tb(1,"mat-form-field",13),a.Tb(2,"mat-label"),a.yc(3,"NombreRecurso@IP:Puerto"),a.Sb(),a.Tb(4,"input",14),a.ac("change",function(t){a.rc(e);const s=i.index;return a.ec(2).saveUri(t,s,"LSB")}),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=i.$implicit,t=a.ec(2);a.Cb(4),a.kc("disabled",t.visualizationMode)("value",e.uri)}}function L(e,i){if(1&e&&(a.Tb(0,"div",10),a.xc(1,S,5,2,"div",11),a.Sb()),2&e){const e=a.ec();a.Cb(1),a.kc("ngForOf",e.uriListToDisplay.LSB)}}let y=(()=>{class e{constructor(e,i){this.alertService=e,this.userService=i,this.typeLists=[{value:0,viewValue:"Ninguna"},{value:1,viewValue:"Lista Negra"},{value:2,viewValue:"Lista Blanca"}],this.displayBLlabel=!0,this.displayWLlabel=!0,this.visualizationMode=!1}ngOnInit(){this.visualizationMode=!!this.visualizationPermission(),this.uriListToDisplay=this.getUriElements(),this.checkSelectedTypeList()}visualizationPermission(){return!this.userService.isRole("ADMIN")&&!this.userService.isRole("CONFIGURATION")&&this.userService.isRole("VISUALIZATION")}getUriElements(){let e=0,i={LSN:[],LSB:[]},t=this.resourceForm.value.listaUris.filter(e=>"LSN"==e.tipo),s=this.resourceForm.value.listaUris.filter(e=>"LSB"==e.tipo);void 0!==t&&t.forEach((e,i)=>{t[i].uri=e.uri.replace("sip:","")}),void 0!==s&&s.forEach((e,i)=>{s[i].uri=e.uri.replace("sip:","")}),i.LSN=t,i.LSB=s,e=8-t.length;for(let n=0;n<e;n++)i.LSN.push({uri:"",tipo:"LSN",nivel_colateral:0});e=8-s.length;for(let n=0;n<e;n++)i.LSB.push({uri:"",tipo:"LSB",nivel_colateral:0});return i}saveUri(e,i,t){return Object(s.a)(this,void 0,void 0,function*(){null!=e.target.value.match(n.a.URI_PATTERN)||""===e.target.value?this.uriListToDisplay[t][i].uri=e.target.value:null==e.target.value.match(n.a.URI_PATTERN)&&""!=e.target.value&&(yield this.alertService.errorMessage("","URI no v\xe1lido"),e.target.value="")})}checkSelectedTypeList(){1==this.resourceForm.value.restriccion_entrantes?(this.displayBLlabel=!0,this.displayWLlabel=!1):2==this.resourceForm.value.restriccion_entrantes?(this.displayBLlabel=!1,this.displayWLlabel=!0):(this.displayBLlabel=!1,this.displayWLlabel=!1)}}return e.\u0275fac=function(i){return new(i||e)(a.Nb(r.a),a.Nb(l.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["resource-lists"]],decls:13,vars:5,consts:[[1,"form",3,"formGroup"],[1,"title"],[1,"main-lists"],["appearance","fill"],["formControlName","restriccion_entrantes","name","typeLists",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","title",4,"ngIf"],["class","uri-group",4,"ngIf"],[3,"value"],[3,"ngClass"],[1,"uri-group"],["class","uri-row",4,"ngFor","ngForOf"],[1,"uri-row"],["appearance","legacy"],["matInput","",3,"disabled","value","change"]],template:function(e,i){1&e&&(a.Tb(0,"form",0),a.Tb(1,"div",1),a.Tb(2,"mat-label"),a.yc(3,"Listas B/N"),a.Sb(),a.Sb(),a.Tb(4,"div",2),a.Tb(5,"mat-form-field",3),a.Tb(6,"mat-label"),a.yc(7,"Tipo de restricci\xf3n"),a.Sb(),a.Tb(8,"mat-select",4),a.ac("selectionChange",function(){return i.checkSelectedTypeList()}),a.xc(9,v,2,2,"mat-option",5),a.Sb(),a.Sb(),a.xc(10,m,5,6,"div",6),a.xc(11,h,2,1,"div",7),a.xc(12,L,2,1,"div",7),a.Sb(),a.Sb()),2&e&&(a.kc("formGroup",i.resourceForm),a.Cb(9),a.kc("ngForOf",i.typeLists),a.Cb(1),a.kc("ngIf",0!=i.resourceForm.value.restriccion_entrantes),a.Cb(1),a.kc("ngIf",i.displayBLlabel),a.Cb(1),a.kc("ngIf",i.displayWLlabel))},directives:[c.z,c.s,c.k,o.f,o.c,u.a,c.r,c.i,b.k,b.l,p.j,b.j,d.b],styles:[".main-lists[_ngcontent-%COMP%]   .uri-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main-lists[_ngcontent-%COMP%]   .uri-group[_ngcontent-%COMP%]     .no-display{display:none}.main-lists[_ngcontent-%COMP%]   .uri-group[_ngcontent-%COMP%]   .uri-row[_ngcontent-%COMP%]{width:80%}.main-lists[_ngcontent-%COMP%]   .uri-group[_ngcontent-%COMP%]   .uri-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})()}}]);