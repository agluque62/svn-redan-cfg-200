<form class="form" [formGroup]="form" *ngIf="ready">

    <div *ngIf="form.errors?.ipEqualsValidator && (form.touched || form.dirty)" class="error-message">
        {{ 'gateway.alert.err_same_ips' | translate }}
    </div>

    <div class="row">
        <div class="col">

            <mat-form-field appearance="fill">
                <mat-label>{{ 'gateway.ID_gtw' | translate }}</mat-label>
                <input matInput required formControlName="nombre">
                <mat-error *ngIf="form.controls['nombre'].hasError('required')">
                    {{ appset.FIELD_REQUIRED | translate }}
                </mat-error>
                <mat-error *ngIf="form.controls['nombre'].hasError('pattern')">
                    {{ appset.INVALID_NAME | translate }}
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'gateway.IP_virtual_address' | translate }}</mat-label>
                <input matInput required formControlName="ipv">
                <mat-error *ngIf="form.controls['ipv'].hasError('required')">
                    {{ appset.FIELD_REQUIRED | translate }}
                </mat-error>
                <mat-error *ngIf="form.controls['ipv'].hasError('pattern')">
                    {{ appset.INVALID_IP | translate }}
                </mat-error>
            </mat-form-field>

            <div class="form-item dual">
                <mat-label>{{ 'gateway.CPU_dual' | translate }}</mat-label>
                <mat-checkbox class="checkbox" [disabled]="true" [checked]="true"></mat-checkbox>
            </div>
        </div>

        <div class="col">

            <mat-form-field class="select" appearance="fill" *ngIf="type=='EDIT'">
                <mat-label>{{ 'gateway.location' | translate }}</mat-label>
                <mat-select formControlName="EMPLAZAMIENTO_idEMPLAZAMIENTO" (selectionChange)="siteChanges($event.value)">
                    <mat-option [value]="site.idEMPLAZAMIENTO" *ngFor="let site of siteOptions">
                        {{ site.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'gateway.gateway_supervision' | translate }}</mat-label>
                <mat-select formControlName="sppe">
                    <mat-option [value]="0">{{ 'No' | translate }}</mat-option>
                    <mat-option [value]="sppe" *ngFor="let sppe of sppeOptions">
                        <div *ngIf="sppe === 1">
                            {{ sppe }} {{ 'gateway.second' | translate }}
                        </div>
                        <div *ngIf="sppe !== 1">
                            {{ sppe }} {{ 'gateway.seconds' | translate }}
                        </div>
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'gateway.activation_delay' | translate }}</mat-label>
                <mat-select formControlName="dvrrp">
                    <mat-option [value]="dvrrp" *ngFor="let dvrrp of dvrrpOptions">
                        {{ dvrrp/1000 }} {{ 'gateway.seconds' | translate }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'gateway.last_load_UTC' | translate }}</mat-label>
                <input matInput required formControlName="ultima_actualizacion">
            </mat-form-field>

        </div>
    </div>

    <div class="row">
        <mat-tab-group class="cpu">
            <mat-tab label="CPU 0">
                <div class="cpu-form">
                    <mat-form-field appearance="fill">
                        <mat-label>{{ 'gateway.IP' | translate }}</mat-label>
                        <input matInput required formControlName="ipb1">
                        <mat-error *ngIf="form.controls['ipb1'].hasError('required')">
                            {{ appset.FIELD_REQUIRED | translate }}
                        </mat-error>
                        <mat-error *ngIf="form.controls['ipb1'].hasError('pattern')">
                            {{ appset.INVALID_IP | translate }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>{{ 'gateway.IP_gtw' | translate }}</mat-label>
                        <input matInput required formControlName="ipg1">
                        <mat-error *ngIf="form.controls['ipg1'].hasError('required')">
                            {{ appset.FIELD_REQUIRED | translate }}
                        </mat-error>
                        <mat-error *ngIf="form.controls['ipg1'].hasError('pattern')">
                            {{ appset.INVALID_IP | translate }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>{{ 'gateway.Mask' | translate }}</mat-label>
                        <input matInput required formControlName="msb1">
                        <mat-error *ngIf="form.controls['msb1'].hasError('required')">
                            {{ appset.FIELD_REQUIRED | translate }}
                        </mat-error>
                        <mat-error *ngIf="form.controls['msb1'].hasError('pattern')">
                            {{ appset.INVALID_MASK | translate }}
                        </mat-error>
                    </mat-form-field>
                </div>
            </mat-tab>
            <mat-tab label="CPU 1">
                <div class="cpu-form">
                    <mat-form-field appearance="fill">
                        <mat-label>{{ 'gateway.IP' | translate }}</mat-label>
                        <input matInput required formControlName="ipb2">
                        <mat-error *ngIf="form.controls['ipb2'].hasError('required')">
                            {{ appset.FIELD_REQUIRED | translate }}
                        </mat-error>
                        <mat-error *ngIf="form.controls['ipb2'].hasError('pattern')">
                            {{ appset.INVALID_IP | translate }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>{{ 'gateway.IP_gtw' | translate }}</mat-label>
                        <input matInput required formControlName="ipg2">
                        <mat-error *ngIf="form.controls['ipg2'].hasError('required')">
                            {{ appset.FIELD_REQUIRED | translate }}
                        </mat-error>
                        <mat-error *ngIf="form.controls['ipg2'].hasError('pattern')">
                            {{ appset.INVALID_IP | translate }}
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>{{ 'gateway.Mask' | translate }}</mat-label>
                        <input matInput required formControlName="msb2">
                        <mat-error *ngIf="form.controls['msb2'].hasError('required')">
                            {{ appset.FIELD_REQUIRED | translate }}
                        </mat-error>
                        <mat-error *ngIf="form.controls['msb2'].hasError('pattern')">
                            {{ appset.INVALID_MASK | translate }}
                        </mat-error>
                    </mat-form-field>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
</form>